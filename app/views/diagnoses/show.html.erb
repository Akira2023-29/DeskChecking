<div class="container mx-auto text-center justify-center">
  <div>
    <h1 class="font-bold text-4xl my-6">投稿詳細</h1>
  </div>

  <div class="p-4 m-2 bg-teal-500 rounded-md transition duration-300">
    <div class="mb-3 flex justify-center">
      <%= image_tag @diagnosis.desk_image.url%>
    </div>

    <div class="mb-3 flex flex-col">
      <h2 class= "text-2xl mb-1">【診断結果】</h2>
      <%= @diagnosis.result_jp %>
    </div>

    <div class="mb-3">
      <%= link_to "SNSにシェア", "#", class: "inline-block bg-amber-600 hover:bg-amber-800 text-white font-bold mx-1 py-2 px-4 rounded transition duration-150 ease-in-out" %>
    </div>

    <div class="mt-10 mb-3 text-center">
      <h2 class= "text-2xl mb-1">【こちらをデスクに置いてみませんか？】</h2> 
      <% if @diagnosis.color_name.present? %>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <% items = RakutenWebService::Ichiba::Item.search(keyword: "オブジェ #{@diagnosis.color_name}", hits: 8) %>
            <% items.each do |item| %>
              <div class="container max-w-sm p-4 m-2 shadow-lg shadow-cyan-900/80 bg-cyan-600 hover:bg-cyan-500 rounded-md transition duration-300">
                <div class="flex justify-center mb-4">
                  <%= image_tag item['mediumImageUrls'].first %><br>
                </div>
                <%= link_to item['itemName'], item.url, target: '_blank' %><br>
                <%= "#{item['itemPrice']}円 " %><br>
              </div>
            <% end %>
        </div>
      <% end %>
    </div>

    <div class="mb-3">
      <%= link_to "他の人の診断結果一覧", diagnoses_path, class: "inline-block bg-amber-600 hover:bg-amber-800 text-white font-bold mx-1 py-2 px-4 rounded transition duration-150 ease-in-out"%>
    </div>

    <% if current_user.own?(@diagnosis) %>
      <div class="mb-3 inline-block bg-amber-600 hover:bg-amber-800 text-white font-bold mx-1 py-2 px-4 rounded transition duration-150 ease-in-out">
        <%= link_to "削除する", diagnosis_path(@diagnosis), data: { turbo_method: :delete, turbo_confirm: "本当に削除しますか？"}%>
      </div>
    <% end %>
  </div>
</div>
